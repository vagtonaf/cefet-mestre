{{response.files.append(URL(r=request,c='static',f='jquery.dataTables.min.js'))}}
{{response.files.append(URL(r=request,c='static',f='demo_table.css'))}}
{{extend 'layout.html'}}
<script>
$(document).ready(function() { 
   jQuery('.smarttable').dataTable(); 
});
</script>
<h1>Lista de  Alunos Cadastrados</h1>

[<a href="#nil" onclick="jQuery('#form').slideToggle();">Cadastro</a>]
{{=button('Lista Usuario','../usuario/list_usuarios')}}
{{=button('Lista de Alocação','../alocacao/list_alocacoes')}}
<div id="form">
<h2>Novo Aluno</h2>
{{=form}}
</div>

<br /><br />
<table class="smarttable">
<thead>
    <tr>
        <th>Matrícula</th><th>Nome</th><th>Email</th><th>Acao</th>
    </tr>    
</thead>
<tbody>
{{if alunos:}}
   {{for aluno in alunos:}}
   <tr>
      <td>{{=A(aluno.aluno.matricula,_href=url('cad_aluno',aluno.aluno.id))}}</td>
      <td>{{=aluno.auth_user.first_name + ' ' + aluno.auth_user.last_name}}</td>
      <td>{{=aluno.auth_user.email}}</td>
      <td>{{=button('Alterar','edit_aluno',aluno.aluno.id)}}</td>
   </tr>
   {{pass}}
{{ else: }}
    <tr><td>Nenhum Registro não Encontrado</td></tr>
{{ pass }}
   
</tbody>
</table>
