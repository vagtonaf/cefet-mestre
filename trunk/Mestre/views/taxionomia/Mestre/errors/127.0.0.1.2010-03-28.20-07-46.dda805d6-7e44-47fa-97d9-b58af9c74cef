(dp1
S'output'
p2
S''
sS'layer'
p3
S'D:\\python26\\web2py\\applications\\Mestre/controllers/relatorios.py'
p4
sS'code'
p5
S"# coding: utf8\n# try something like\nimport random\n\n\ndef index():\n    c_turmas=db().select(db.turma.ALL)\n    return { 'v_turmas' : c_turmas}\n\ndef rel_aluno_nota():\n    aluno_nota=[]\n    from applications.Mestre.modules.graf1 import gera_grafico   \n    turma_id = request.args[0]\n    query=(db.aluno.id == db.alocacao.aluno)&(db.turma.id==db.alocacao.turma)&(db.turma.id==turma_id)\n    alocacao = db(query).select(db.aluno.matricula)\n    print db(query)._select(db.aluno.matricula)\n    for aluno in alocacao:\n        novo_aluno = {'nome':aluno.matricula,'nota':random.random()*10}\n        aluno_nota.append(novo_aluno)\n        print novo_aluno \n    gera_grafico(aluno_nota,'Turma 01 - Notas','Alunos','Notas','applications\\Mestre\\static\\turma01.png')\n    return dict(imagem = 'turma01.png')\n    \ndef rel_alunos_turma():\n    q_where=(db.aluno.id==db.alocacao.aluno)&(db.alocacao.turma==db.turma.id)\n    q_select=db.aluno.ALL,db.alocacao.turma,db.alocacao.data,db.turma.nome\n    db_alunos=db(q_where).select(db.aluno.ALL,db.alocacao.turma,db.alocacao.data,db.turma.nome)\n    print db(q_where)._select(q_select)\n    return { 'v_alunos' : db_alunos}\n\nresponse._vars=response._caller(rel_alunos_turma)\n"
p6
sS'traceback'
p7
S'Traceback (most recent call last):\n  File "D:\\python26\\web2py\\gluon\\restricted.py", line 173, in restricted\n    exec ccode in environment\n  File "D:\\python26\\web2py\\applications\\Mestre/controllers/relatorios.py", line 31, in <module>\n  File "D:\\python26\\web2py\\gluon\\globals.py", line 96, in <lambda>\n    self._caller = lambda f: f()\n  File "D:\\python26\\web2py\\applications\\Mestre/controllers/relatorios.py", line 28, in rel_alunos_turma\n    print db(q_where)._select(q_select)\n  File "D:\\python26\\web2py\\gluon\\sql.py", line 2948, in _select\n    w2p_tablenames = [ t for t in tablenames if isinstance(self._db[t],Table) ]\n  File "D:\\python26\\web2py\\gluon\\sql.py", line 1289, in __getitem__\n    return dict.__getitem__(self, str(key))\nKeyError: \'gluon\'\n'
p8
s.