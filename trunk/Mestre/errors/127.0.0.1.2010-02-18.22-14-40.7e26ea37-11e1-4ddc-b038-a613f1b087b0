(dp1
S'output'
p2
S''
sS'layer'
p3
S'D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\applications\\Mestre/controllers/turma.py'
p4
sS'code'
p5
S"# coding: utf8\n# try something like\n\ndef cad_turma():\n    turma = SQLFORM(db.turma)\n    if turma.accepts(request.vars,session):\n            redirect(URL(r=request,f='ver_turma'))\n    if turma.errors: response.flash='Erro em seu formul\xc3\xa1rio'\n    return dict(turma=turma)\n\ndef ver_turma():\n    row_turma=db().select(db.turma.ALL)\n    return dict(row_turma=row_turma)\n    \ndef teste_turma():\n    row_alocacao = db(db.alocacao.aluno==auth.user.id).select(db.alocacao.ALL)\n    id = row_alocacao.alocacao.turma\n    row_turma = db().select(db.turma.ALL)\n    return dict(row_turma=row_turma)\n    \n@auth.requires_login()\ndef list_turmas():\n   form=crud.create(db.turma)\n   turmas=db(db.turma.id>0).select(db.turma.ALL,db.disciplina.ALL,left=db.disciplina.on(db.turma.disciplina==db.disciplina.id))\n   response.flash='Lista Turma'\n   return dict(turmas=turmas,form=form)\n\n@auth.requires_login()\ndef edit_turma():\n   turma_id=request.args(0)\n   turma=db.turma[turma_id] or redirect(URL(r=request,f='../default/error'))\n   form=crud.update(db.turma,turma,next=url('list_turmas'))\n   return dict(form=form)\n\nresponse._vars=response._caller(list_turmas)\n"
p6
sS'traceback'
p7
S'Traceback (most recent call last):\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\restricted.py", line 173, in restricted\n    exec ccode in environment\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\applications\\Mestre/controllers/turma.py", line 35, in <module>\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\globals.py", line 96, in <lambda>\n    self._caller = lambda f: f()\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\tools.py", line 1848, in f\n    return action(*a, **b)\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\applications\\Mestre/controllers/turma.py", line 23, in list_turmas\n    form=crud.create(db.turma)\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\tools.py", line 2324, in create\n    deletable=False,\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\tools.py", line 2271, in update\n    keepvalues=self.settings.keepvalues):\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\sqlhtml.py", line 755, in accepts\n    onvalidation,\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\html.py", line 1267, in accepts\n    status = self._traverse(status)\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\html.py", line 449, in _traverse\n    newstatus = c._traverse(status) and newstatus\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\html.py", line 449, in _traverse\n    newstatus = c._traverse(status) and newstatus\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\html.py", line 449, in _traverse\n    newstatus = c._traverse(status) and newstatus\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\html.py", line 449, in _traverse\n    newstatus = c._traverse(status) and newstatus\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\html.py", line 456, in _traverse\n    newstatus = self._validate()\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\html.py", line 1074, in _validate\n    (value, errors) = validator(value)\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\validators.py", line 440, in __call__\n    rows = self.dbset(field == value).select(limitby=(0, 1))\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\sql.py", line 2395, in __eq__\n    return Query(self, \'=\', value)\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\sql.py", line 2805, in __init__\n    right = sql_represent(right, left.type, left._db._dbname, left._db._db_codec)\n  File "D:\\cefet\\2009.2, 2010.1\\LocalHostWeb2Py\\MESTRE-20100210\\web2py\\gluon\\sql.py", line 513, in sql_represent\n    return str(int(obj))\nValueError: invalid literal for int() with base 10: \'TR001\'\n'
p8
s.